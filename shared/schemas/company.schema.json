{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Company",
  "type": "object",
  "definitions": {
    "Contact": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["email", "phone", "whatsapp", "address"]
        },
        "value": {
          "type": "string"
        },
        "source": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": ["type", "value"]
    },
    "SocialMedia": {
      "type": "object",
      "properties": {
        "platform": {
          "type": "string"
        },
        "url": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": ["platform", "url"]
    },
    "Product": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "price": {
          "type": "string"
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "image_url": {
          "type": "string",
          "format": "uri"
        },
        "description": {
          "type": "string"
        }
      },
      "required": ["name"]
    }
  },
  "properties": {
    "id": {
      "type": "string"
    },
    "domain": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?\\.[a-zA-Z]{2,}$"
    },
    "company_name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "smykm_notes": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "contacts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Contact"
      }
    },
    "social_media": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SocialMedia"
      }
    },
    "products": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Product"
      }
    },
    "contact_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "extracted_at": {
      "type": "string",
      "format": "date-time"
    },
    "enriched_at": {
      "type": "string",
      "format": "date-time"
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    },
    "user_id": {
      "type": "string"
    }
  },
  "required": ["id", "domain", "contacts", "products", "created_at", "updated_at"]
}
